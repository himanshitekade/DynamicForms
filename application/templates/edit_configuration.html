{% extends 'base_configuration.html' %}
{% load static %}
{% block content %}

<div class="nk-content">
    <div class="container-fluid">
        <div class="nk-content-inner">
            <div class="nk-content-body">
                <div class="nk-block-head nk-block-head-sm">
                    <div class="nk-block-between">
                        <div class="nk-block-head-content">
                            <div class="nk-block-des text-soft">
                                {% if messages %}
                                    {% for message in messages %}   
                                        <div class="example-alert">
                                            <div class="alert alert-{{ message.tags}} alert-dismissible alert-icon"><strong>{{message}}</strong><button class="close" data-bs-dismiss="alert"></button>
                                            </div>
                                        </div>
                                    {% endfor %}   
                                {% endif %} 
                            </div>
                        </div><!-- .nk-block-head-content -->
                        <div class="nk-block-head-content">
                            <div class="toggle-wrap nk-block-tools-toggle">    
                            </div><!-- .toggle-wrap -->
                        </div><!-- .nk-block-head-content -->
                    </div><!-- .nk-block-between -->
                </div><!-- .nk-block-head -->
							<form action="{% url redirect %}" method="POST" 
							 enctype="multipart/form-data">
								{% csrf_token %}
								<fieldset>
								<legend>{{JsonForm.legend}}: </legend>
							<!-- JsonForm.HTML_field: [{tag:, type:,..},{}] -->
							<!-- data: [] -->
							<div class="nk-block">
                        <div class="card card-bordered card-stretch">
                            <div class="card-inner-group">
                                <div class="card-inner position-relative card-tools-toggle">
                                    <div class="row gy-4">
                                    	<input type="text" hidden name="_put">
                                    	<input type="text" hidden name="id" value="{{data.id}}">
                                    	{% for i in JsonForm.HTML_fields %}
                                    	{% if i.tag == "input" %}
                                    	{% if i.type == "text" %}
                                    	<div class="col-xxl-3 col-md-6" >
                                    		<div class="form-group">
                                    			<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                    			{% if i.required == "true" %}
                                    			<span style="color:red;">*</span>
                                    			{% endif %}
                                    			<div class="form-control-wrap">
                                    				<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" name="{{i.name}}"
                                    				value="{{data|get:i}}"
                                    				{% if i.placeholder %} placeholder="{{i.placeholder}}"{% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}
                                    				{% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} {% if i.minlength %} minlength="{{i.minlength}}"{% endif %} 
                                    				{% if i.maxlength %} maxlength="{{i.maxlength}}"{% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.pattern %} pattern="{{i.pattern}}"{% endif %} {% if i.required.lower == "true" %} required {% endif %}>
                                    			</div>
                                    		</div>
                                    	</div><!--col-->
                                    	{% elif i.type == "number" %}
                                    	<div class="col-xxl-3 col-md-6">
                                    		<div class="form-group">
                                    			<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                    			{% if i.required == "true" %}
                                    			<span style="color:red;">*</span>
                                    			{% endif %}
                                    			<div class="form-control-wrap">
                                    				<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" name="{{i.name}}"   value="{{data|get:i}}"
                                    				{% if i.placeholder %} placeholder="{{i.placeholder}}" {% endif %}
                                    				{% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.min %} min="{{i.min}}" {% endif %} {% if i.max %} max="{{i.max}}" {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} 
                                    				{% if i.autofocus == "true" %} autofocus {% endif %}>
                                    			</div>
                                    		</div>
                                    	</div><!--col-->
                                    	{% elif i.type == "checkbox" %}
                                    	<div class="col-xxl-3 col-md-6">
                                    		<div class="form-group">
                                    			<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                    			{% if i.required == "true" %}
                                    			<span style="color:red;">*</span>
                                    			{% endif %}
                                    			{% for label, value in i.label1.items %}
                                    			{% isCheck data i.name value as ischecked %}
                                    			<div class="form-control-wrap">
                                    				<input type="{{i.type}}" {% if i.required == "true" %} onchange="ifChecked(this.name)" 
                                    				{% endif %}
                                    				value="{{value}}" name="{{i.name}}" {% if ischecked %}checked{% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %}> {{label}}
                                    				{% endfor %}
                                    			</div>
                                    		</div>
                                    	</div><!--col-->
                                    	{% elif  i.type == "radio" %}
                                    	<div class="col-xxl-3 col-md-6">
                                    		<div class="form-group">
                                    			<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                    			{% if i.required == "true" %}
                                    			<span style="color:red;">*</span>
                                    			{% endif %}
                                    			{% for label, value in i.label1.items %}
                                    			{% isRadio data i.name value as ischecked %}
                                    			<div class="form-control-wrap">
                                    				<input type="{{i.type}}" value="{{value}}" name="{{i.name}}"
                                    				{% if ischecked %}checked {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %}>{{label}} 
                                    			</div>
                                    			{% endfor %}
                                    		</div>
                                    	</div><!--col-->
                                    	{% elif i.type == "date" %}
                                    	<div class="col-xxl-3 col-md-6">
                                    		<div class="form-group">
                                    			<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                    			{% if i.required == "true" %}
                                    			<span style="color:red;">*</span>
                                    			{% endif %}
                                    			<div class="form-control-wrap">
                                    				<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" value="{{date_str}}" name="{{i.name}}" onchange="checkdate(this.value)" 
                                    				{% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} 
                                    				{% if i.autofocus.lower == "true" %} autofocus{% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}{% if i.min %} min="{{i.min}}" {% endif %} {% if i.max %} max="{{i.max}}" {% endif %}>
                                    			</div>
                                    		</div>
                                    	</div><!--col-->
                                    	{% elif i.type == "file" %}
                                    	<div class="col-xxl-3 col-md-6">
                                    		<div class="form-group">
                                    			<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                    			{% if i.required == "true" %}
                                    			<span style="color:red;">*</span>
                                    			{% endif %}
                                    			<a href="{{data.file.url}}" target="_blank">{{data.file.url}}</a>
                                    			<div class="form-control-wrap">
                                    				<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" name="{{i.name}}"
                                    				{% if i.multiple.lower == "true" %} multiple {% endif %}
                                    				{% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.accept %} accept="{{i.accept}}" {% endif %} {% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %}>
                                    			</div>
                                    		</div>
                                    	</div><!--col-->
                                    	{% elif i.type == "color" %}
                                    	<div class="col-xxl-3 col-md-6">
                                          <div class="form-group">
                                          	<label for="{{i.name}}" class="form-label"> 
                                          	{{i.label}} </label>
                                          	{% if i.required == "true" %}
                                          	<span style="color:red;">*</span>
                                          	{% endif %}
                                          	<div class="form-control-wrap">
                                          		<input type="{{i.type}}" id="{{i.id}}" value="{{value}}" name="{{i.name}}" class="{{i.class}}" 
                                          		{% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                          	</div>
                                          </div>
                                      </div><!--col-->
                                      {% elif i.type == "week" %}
                                      <div class="col-xxl-3 col-md-6">
                                      	<div class="form-group">
                                      		<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                      		{% if i.required == "true" %}
                                      		<span style="color:red;">*</span>
                                      		{% endif %}
                                      		<div class="form-control-wrap">
                                      			<input type="{{i.type}}" id="{{i.id}}" name="{{i.name}}" class="{{i.class}}" value="{{data|get:i}}" {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.required == "true" %} required {% endif %} {% if i.readonly == "true" %} readonly {% endif %} {% if i.min %} min="{{i.min}}" {% endif %} {% if i.max %} max="{{i.max}}" {% endif %} {% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                      		</div>
                                      	</div>
                                      </div><!--col-->	
                                      {% elif i.type == "email" %}
                                      <div class="col-xxl-3 col-md-6">
                                      	<div class="form-group">
                                      		<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                      		{% if i.required == "true" %}
                                      		<span style="color:red;">*</span>
                                      		{% endif %}
                                      		<div class="form-control-wrap">
                                      			<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" name="{{i.name}}" value="{{data|get:i}}"
                                      			{% if i.placeholder %} placeholder="{{i.placeholder}}"{% endif %}
                                      			{% if i.maxlength %} maxlength="{{i.maxlength}}" {% endif %}
                                      			{% if i.minlength %} minlength="{{i.minlength}}" {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.disabled == "true" %} disabled {% endif %} 
                                      			{% if i.readonly.lower == "true" %} readonly {% endif %} {% if i.multiple.lower == "true" %} multiple {% endif %} {% if i.pattern %} pattern="{{i.pattern}}" {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                      		</div>
                                      	</div>
                                      </div><!--col-->
                                      {% elif i.type == "month" %}
                                      <div class="col-xxl-3 col-md-6">
                                      	<div class="form-group">
                                      		<label for="{{i.name}}" class="form-label">{{i.label}}
                                				</label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" value="{{data|get:i}}" name="{{i.name}}" onchange="checkmonth(this.value)"  {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} {% if i.min %} min="{{i.min}}" {% endif %} {% if i.max %} max="{{i.max}}" {% endif %} {% if i.autofocus.lower == "true" %} autofocus {% endif %}{% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                				</div>
                                			</div>
                                		</div><!--col-->
                                		{% elif i.type == "time" %}
                                		<div class="col-xxl-3 col-md-6">
                                			<div class="form-group">
                                				<label for="{{i.name}}" class="form-label">{{i.label}}
                                				</label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" value="{{time_str}}" name="{{i.name}}"{% if i.disabled.lower == "true" %} disabled {% endif %}  {% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} {% if i.min %} min="{{i.min}}" {% endif %} {% if i.max %} max="{{i.max}}" {% endif %} {% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                				</div>
                                			</div>
                                		</div><!--col-->
                                		{% elif i.type == "datetime-local" %}
                                		<div class="col-xxl-3 col-md-6">
                                			<div class="form-group">
                                				<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" value="{{dTime_str}}" name="{{i.name}}" onchange="checkdate(this.value)" 
                                					{% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} 
                                					{% if i.min %} min="{{i.min}}" {% endif %}
                                					{% if i.max %} max="{{i.max}}" {% endif %}
                                					{% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                				</div>
                                			</div>
                                		</div><!--col-->
                                		{% elif i.type == "tel" %}
                                		<div class="col-xxl-3 col-md-6">
                                			<div class="form-group">
                                				<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" name="{{i.name}}" value="{{data|get:i}}" {% if i.placeholder %} placeholder="{{i.placeholder}}" {% endif %}
                                					{% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.pattern %} pattern="{{i.pattern}}" {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.maxlength %} maxlength="{{i.maxlength}}" {% endif %} {% if i.maxlength %} maxlength="{{i.maxlength}}" {% endif %}
                                					{% if i.readonly.lower == "true" %} readonly {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                				</div>
                                			</div>
                                		</div><!--col-->
                                		{% elif i.type == "password" %}
                                		<div class="col-xxl-3 col-md-6">
                                			<div class="form-group">
                                				<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}"name="{{i.name}}" value="{{data|get:i}}" {% if i.placeholder %} placeholder="{{i.placeholder}}" {% endif %}
                                					{% if i.pattern %} pattern="{{i.pattern}}" {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.maxlength %} maxlength="{{i.maxlength}}" {% endif %} {% if i.minlength %} minlength="{{i.minlength}}" {% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                				</div>
                                			</div>
                                		</div><!--col-->
                                		{% elif i.type == "url" or  i.type == "search" %}
                                		<div class="col-xxl-3 col-md-6">
                                			<div class="form-group">
                                				<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<input type="{{i.type}}" class="{{i.class}}" id="{{i.id}}" name="{{i.name}}" value="{{data|get:i}}" {% if i.placeholder %} placeholder="{{i.placeholder}}"{% endif %}
                                					{% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %} {% if i.maxlength %} maxlength="{{i.maxlength}}" {% endif %} {% if i.minlength %} minlength="{{i.minlength}}" {% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.pattern %} pattern="{{i.pattern}}" {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                				</div>
                                			</div>
                                		</div><!--col-->
                                		{% elif i.type == "range" %}
                                		<div class="col-xxl-3 col-md-6">
                                			<div class="form-group">
                                				<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<input type="{{i.type}}" id="{{i.id}}" name="{{i.name}}" {% if i.min %} min="{{i.min}}" {% endif %} {% if i.max %} max="{{i.max}}" {% endif %} {% if i.required.lower == "true" %} required {% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %}>
                                				</div>
                                			</div>
                                		</div><!--col-->
                                		{% endif %}
                                		{% elif i.tag == "select" %}
                                		<div class="col-xxl-3 col-md-6">
                                			<div class="form-group">
                                				<label for="{{i.name}}" class="form-label"> {{i.label}} </label>
                                				{% if i.required == "true" %}
                                				<span style="color:red;">*</span>
                                				{% endif %}
                                				<div class="form-control-wrap">
                                					<select class="form-select" name="{{i.name}}" class="{{i.class}}" 
                                					{% if i.required.lower == "true" %} required {% endif %}
                                					{% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.multiple.lower == "true"%} multiple {% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %}> 
                                					{% if i.optgroup %}
                                					{% for opt in i.optgroup %}
                                					{% for label, value in opt.items %}
                                					<optgroup label="{{label}}">
                                						<option>--select--</option>
                                						{% for k in value %}
                                						<option  {% if data.dev == k.1 %} selected {% endif %}value="{{k.1}}">{{k.0}}</option>{% endfor %}
                                					</optgroup>
                                					{% endfor %}
                                					{% endfor %}
                                					{% else %}
                                					<option disabled>--select--</option>
                                					{% for j in i.options %}
                                					{% for k in j %}
                                					<option {% if data.course == k %} selected {% endif %} value="{{k}}">{{k}}</option>
                                					{% endfor %}
                                					{% endfor %}
                                					{% endif %}	
                                				</select>
                                			</div>
                                		</div>	
                                	</div><!--col-->
                                	{% elif i.tag == "textarea" %}
                                	<div class="col-xxl-3 col-md-6">
                                		<div class="form-group">
                                			<label for="{{i.name}}" class="form-label">
                                				{{i.label}}
                                			</label>
                                			{% if i.required == "true" %}
                                			<span style="color:red;">*</span>
                                			{% endif %}
                                			<div class="form-control-wrap">
                                				<textarea  class ="{{i.class}}" id="{{i.id}}" name="{{i.name}}" value = "{{data|get:i}}" rows="{{i.rows}}" cols="{{i.cols}}" {% if i.required.lower == "true" %} required {% endif %} {% if i.autofocus.lower == "true" %} autofocus {% endif %} {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.maxlength %} maxlength="{{i.maxlength}}" {% endif %} {% if i.minlength %} minlength="{{i.minlength}}" {% endif %} {% if i.placeholder %} placeholder="{{i.placeholder}}" {% endif %} {% if i.autocomplete %} autocomplete="{{i.autocomplete}}"{% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %}>{{data|get:i}}</textarea>
                                			</div>
                                		</div>	
                                	</div><!--col-->	
                                	{% elif i.tag == "button" %}
                                	{% if i.type == "submit" or i.type == "reset" %}
                                	<div class="col-12 mt-4">
                                		<div class="form-group">
                                			<div class="form-group">
                                				<button type="{{i.type}}" class="{{i.class}}" value="{{value}}" {% if i.disabled.lower == "true" %} disabled {% endif %} {% if i.autofocus.lower == "true" %} autofocus {% endif %} 
                                				{% if i.required.lower == "true" %} required {% endif %} {% if i.readonly.lower == "true" %} readonly {% endif %}>{{i.label}}
                                			</button>
                                		</div>
                                		{% endif %}	
                                	</div><!--col-->
                                	{% endif %}
                                	{% endfor %}      
                                  </div><!--row-->
                                </div><!-- .card-inner -->
                            </div><!-- .card-inner-group -->
                        </div><!-- .card -->
                    </div><!-- .nk-block -->
                  </fieldset>
                </form>
           	</div>
        </div>
    </div>
</div>
{% endblock content %}

	<!-------------Script for checkbox----------->
	<script>
		function ifChecked(checkbox_name){
			console.log(checkbox_name)
			var isValid = document.getElementsByName(checkbox_name)
			var isCheck = 0;
			var isUnCheck = 0;

			for(var i=0; i<isValid.length; i++){

				console.log(isValid[i].checked)
				if(isValid[i].checked===true){
					isCheck += 1
				}
			}
			if(isCheck === 0){
				for(var i=0; i<isValid.length; i++){
					isValid[i].setAttribute('required','true')
				}				
			}else{
				for(var i=0; i<isValid.length; i++){
					isValid[i].removeAttribute('required')
				}
			}
		}

		function checkdate(date){
			console.log(date)
		}
    
    function checkdatetime(time){
			console.log(time)
		}

		function checkmonth(month){
			console.log(month)
		}

	</script>

    
	<script>
		$(document).ready(function(){
			form = document.getElementsByTagName('input')
			console.log(form)
			for(var i =0; i<form.length;i++){
				// console.log(form[i])
				
					if(form[i].type == 'checkbox'){

						ifChecked(form[i].name)
					}	

			}
		})
			
	</script>